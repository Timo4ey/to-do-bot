# üìã Audio To Do ‚Äî —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á

## ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ (merge, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ MP3/WAV/OGG)
- [x] –ö–æ–º–∞–Ω–¥–∞ `/start`: –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –≤–≤–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- [x] –ö–æ–º–∞–Ω–¥–∞ `/—Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å`: –∑–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ + –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞
- [x] Retry –Ω–∞ –æ—à–∏–±–∫–∏ STT/LLM: 3 –ø–æ–ø—ã—Ç–∫–∏ (15s, 60s, 120s)
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã `.env`: `SBER_API_KEY`, `GIGACHAT_API_KEY`, `RABBITMQ_URL`

---

## üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ `.env` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ë–î (`POSTGRES_DB`, `POSTGRES_USER`, `POSTGRES_PASSWORD`)
- [ ] –î–æ–±–∞–≤–∏—Ç—å `/health` endpoint –¥–ª—è:
  - [ ] Worker
  - [ ] Bot
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `docker-compose.yml`:
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
  - [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `restart: on-failure`
  - [ ] –ó–∞–¥–∞—Ç—å `deploy.resources.limits` (CPU, RAM)

---

## ü§ñ Telegram Bot (aiogram)
- [ ] Middleware:
  - [ ] –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ RPS (–∞–Ω—Ç–∏—Ñ–ª—É–¥)
  - [ ] –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: whitelist-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- [ ] –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏ –∏–∑ `task_status_queue`
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ Markdown-—Ñ–æ—Ä–º–∞—Ç–µ

---

## ü™Ñ Task Queue (RabbitMQ)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—á–µ—Ä–µ–¥–∏:
  - [ ] `audio_tasks_exchange` (direct)
  - [ ] `audio_tasks_queue`
  - [ ] `task_status_queue`
  - [ ] `audio_tasks_dlq`
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–¥–∞—á –∏–∑ –±–æ—Ç–∞ –≤ –æ—á–µ—Ä–µ–¥—å
- [ ] –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏ –∏–∑ –æ—á–µ—Ä–µ–¥–∏

---

## üë∑ Worker (pipeline)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ Postgres:
  - [ ] `Finished`, `Failed`
- [ ] –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞ –≤ `task_status_queue`

---

## üóÑ –•—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã:
  - [ ] `users`
  - [ ] `tasks`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø (`store.py`):
  - [ ] `create_task()`
  - [ ] `update_task()`
  - [ ] `get_user_tasks()`
- [ ] –•—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç –∏ `metadata`, –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∞—É–¥–∏–æ

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prometheus:
  - [ ] –ú–µ—Ç—Ä–∏–∫–∏: RPS, –æ—à–∏–±–∫–∏, –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- [ ] Grafana:
  - [ ] –ë–∞–∑–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å RPS –∏ –æ—à–∏–±–∫–∞–º–∏
- [ ] logging:
  - [ ] INFO, ERROR, traceback

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã:
  - [ ] `store.py`
  - [ ] `llm.py`
  - [ ] `salute_speech_stt.py`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:
  - [ ] –ü–∞–π–ø–ª–∞–π–Ω end-to-end (–±–æ—Ç ‚Üí –æ—á–µ—Ä–µ–¥—å ‚Üí STT/LLM ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
- [ ] –ú–æ–∫–∏ –≤–Ω–µ—à–Ω–∏—Ö API:
  - [ ] STT (Sber)
  - [ ] LLM (GigaChat)